import os, sys, glob

bin = 'thriftproxy'
zocle = '/home/zhaowei/github/zocle'
includes = ['../../include', '/usr/local/include', os.path.join(zocle, 'include')]
sourcedirs = ['.']
files = []
for d in sourcedirs:
	files += glob.glob(d + '/*.c')
libs = ['pcre', 'crypto', 'ssl', 'm', 'pthread']
defs = ['_REENTRANT', '_GNU_SOURCE', 'ZOCLE_WITH_LIBEV']
libpath = ['/usr/local/lib']
ldflags = ''

env = Environment(CCFLAGS='-ggdb -Wall ', CPPDEFINES=defs, CPPPATH=includes, 
				  LIBPATH=libpath, LIBS=libs, LINKFLAGS=ldflags)
env.Program(bin, files + ['/usr/local/lib/libev.a', os.path.join(zocle, 'libzocle.a')])


